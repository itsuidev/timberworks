window.onload=()=>{window.scrollTo(0,0)},document.addEventListener("DOMContentLoaded",(()=>{RunUniversalPageCode();const e=document.querySelector("body");if(!e)return void console.error("Greška: Nije pronađen body na stranici.");const t=e.dataset.page;t?"index"===t?RunIndexPageCode():"products"===t?RunProductsPageCode():"contact"===t?RunContactPageCode():"author"===t||"message"===t||console.error(`Stranica sa imenom '${t}' ne postoji. Proveriti vrednost data-page atributa.`):console.error("Greška: Nije pronadjen data-page atribut u body.")}));const RunUniversalPageCode=()=>{const e=document.getElementById("overlay");if(!e)return;e.classList.add("fade-out"),setTimeout((()=>e.remove()),1600);const t=document.getElementById("main-nav");if(!t)return;window.addEventListener("scroll",(()=>{t.classList.toggle("main-nav-alt",window.scrollY>0)}));const a=document.getElementById("top-btn");a&&a.addEventListener("click",(()=>{window.scrollTo(0,0)}))},products=[{name:"Sapphire Dining Table",price:3850,category:"luxury",img:"assets/img/tables/luxury/sapphire-table.webp",description:"Table only, handcrafted epoxy top"},{name:"Prestige Console Table",price:2e3,category:"luxury",img:"assets/img/tables/luxury/prestige-console.webp",description:"Perfect for hallway or living room"},{name:"Rustic Farmhouse Table",price:1100,category:"kitchen",img:"assets/img/tables/kitchen/rustic-farmhouse.webp",description:"Handcrafted from reclaimed wood"},{name:"Nordic Coffee Table",price:480,category:"living-room",img:"assets/img/tables/living-room/nordic-coffee.webp",description:"Scandinavian minimalist style"},{name:"Ebony Full Table",price:1500,category:"living-room",img:"assets/img/tables/living-room/ebony-table.webp",description:"Ebony table only with epoxy top"},{name:"Maple Epoxy Desk",price:2100,category:"luxury",img:"assets/img/tables/kitchen/maple-table.webp",description:"Stylish workspace with epoxy top"},{name:"Cedar Dining Set",price:650,category:"sets",img:"assets/img/tables/sets/cedar-set.webp",description:"Cedar wood dining table with 2 chairs"},{name:"Luxury Oak Dining Table",price:3350,category:"luxury",img:"assets/img/tables/luxury/luxury-oak.webp",description:"Seats 8, handcrafted with oak and epoxy"},{name:"Venus Side Table",price:650,category:"living-room",img:"assets/img/tables/living-room/venus-side.webp",description:"Elegant side table for any modern interior"},{name:"Oak Dining Set",price:3800,category:"sets",img:"assets/img/tables/sets/oak-set.webp",description:"Oak wood table with 6 leather chairs"},{name:"Sublime Oak Table",price:1800,category:"kitchen",img:"assets/img/tables/kitchen/sublime-oak.webp",description:"Elegant kitchen dining table"}],RunIndexPageCode=()=>{const e=document.getElementById("hero-background"),t=document.getElementById("arrow");if(!e&&!t)return;window.addEventListener("scroll",(()=>{e&&e.classList.toggle("hero-background-alt",window.scrollY>0),t&&t.classList.toggle("arrow-alt",window.scrollY>0)}));const a=document.getElementById("about-btn");if(!a)return;a.addEventListener("click",(()=>{const e=document.getElementById("about-section");e&&e.scrollIntoView({behavior:"smooth"})}));const n=document.getElementById("featured-btn");if(!n)return;n.addEventListener("click",(()=>{const e=document.getElementById("featured-anchor");e&&e.scrollIntoView({behavior:"smooth"})}));const o=document.querySelector("#carousel-first"),r=document.querySelector("#carousel-second");if(!o||!r)return;let s=0;setInterval((()=>{const e=(s+1)%products.length;o.src=products[s].img,r.src=products[e].img,[o,r].forEach((e=>{e.classList.remove("flash-zoom"),e.offsetWidth,e.classList.add("flash-zoom")})),s=(s+2)%products.length}),7e3)},catalogueContent=document.getElementById("catalogue-content"),RenderProductsOnce=e=>{e.forEach((e=>{const t=document.createElement("div");t.className="col-12 col-sm-12 col-lg-4 col-md-6 mb-4 product-card",t.dataset.price=e.price,t.dataset.category=e.category,t.innerHTML=`\n      <div class="card h-100 shadow-sm color-background-primary">\n        <img src="${e.img}" class="card-img-top img-fluid h-100" alt="${e.name}">\n        <div class="card-body d-flex flex-column">\n          <h6 class="card-title text-uppercase color-text-secondary">${e.name}</h6>\n          <p class="card-text text-truncate">${e.description}</p>\n          <div class="mt-auto d-flex justify-content-between align-items-center">\n            <span class="fw-bold btn btn-sm color-foreground-primary">$${e.price}</span>\n          </div>\n        </div>\n      </div>\n    `,catalogueContent.appendChild(t)}))},ApplyFilters=()=>{const e=document.getElementById("price-filter").value,t=document.getElementById("category-filter").value;document.querySelectorAll(".product-card").forEach((a=>{let n=!0;const o=parseFloat(a.dataset.price);"all"!==e&&("low"===e?n=o<=1e3:"medium"===e?n=o>1e3&&o<=3e3:"high"===e&&(n=o>3e3)),"all"!==t&&(n=n&&a.dataset.category===t),a.style.display=n?"":"none"}))},RunProductsPageCode=()=>{products.forEach((e=>{const t=document.createElement("div");t.className="col-12 col-sm-12 col-lg-4 col-md-6 mb-4 product-card",t.dataset.price=e.price,t.dataset.category=e.category,t.innerHTML=`\n      <div class="card h-100 shadow-sm color-background-primary">\n        <img src="${e.img}" class="card-img-top img-fluid h-100" alt="${e.name}">\n        <div class="card-body d-flex flex-column">\n          <h6 class="card-title text-uppercase color-text-secondary">${e.name}</h6>\n          <p class="card-text text-truncate">${e.description}</p>\n          <div class="mt-auto d-flex justify-content-between align-items-center">\n            <span class="fw-bold btn btn-sm color-foreground-primary">$${e.price}</span>\n          </div>\n        </div>\n      </div>\n    `,catalogueContent.appendChild(t)})),document.getElementById("price-filter").addEventListener("change",ApplyFilters),document.getElementById("category-filter").addEventListener("change",ApplyFilters),document.querySelectorAll(".detail-item").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement.querySelector(".detail-content");t.classList.contains("open")||(document.querySelectorAll(".detail-content").forEach((e=>{e.classList.remove("open"),e.parentElement.querySelector(".detail-item").classList.remove("open-panel")})),t.classList.add("open"),e.classList.add("open-panel"))}))}))},firstLastNameRegex=/^[A-ZČĆŠĐŽ][a-zčćšđž]+(?:\s[A-ZČĆŠĐŽ][a-zčćšđž]+)*$/,emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,messageRegex=/^[a-zA-Z0-9 .,!?()'"-]*$/,ShowError=(e,t,a,n,o)=>{t&&(t.style.border="2px solid red");let r="";switch(e){case"regex-fail":r="* Wrong format!";break;case"no-input":r="* Can't be empty!";break;case"min-length":r=`* Minimum ${o} characters!`;break;case"radio-select":r="* Please select one!";break;default:r="* Invalid input!"}a&&(a.innerHTML=`${n} <span style="color:red;">${r}</span>`)},ClearError=(e,t,a)=>{e&&(e.style.border=""),t&&(t.innerHTML=a)},ValidateRegex=(e,t)=>e.test(t),ValidateField=e=>{if(!e)return!0;const t=document.getElementById(e.id+"Label");let a="",n=null;if("email"===e.dataset.validate)a="Email",n=emailRegex;else if("firstName"===e.dataset.validate)a="First name",n=firstLastNameRegex;else if("lastName"===e.dataset.validate)a="Last name",n=firstLastNameRegex;else{if("message"!==e.dataset.validate)return!0;a="Message",n=messageRegex}const o=e.value.trim();return ClearError(e,t,a),""===o?(ShowError("no-input",e,t,a),!1):n&&(r=o,!n.test(r))?(ShowError("regex-fail",e,t,a),!1):!("Message"===a&&o.length<20)||(ShowError("min-length",e,t,a,20),!1);var r},ValidateRadioGroup=(e,t,a)=>document.querySelector(`input[name="${e}"]:checked`)?(ClearError(null,t,a),!0):(ShowError("radio-select",null,t,a),!1),ValidateFormSubmit=()=>{let e=!0;["firstName","lastName","email","message"].forEach((t=>{const a=document.getElementById(t);ValidateField(a)||(e=!1)}));const t=document.getElementById("questionLabel");return ValidateRadioGroup("question",t,"Question type:")||(e=!1),e},RunContactPageCode=()=>{const e=document.getElementById("contact-form");if(!e)return;document.querySelectorAll("input[data-validate], textarea[data-validate]").forEach((e=>{e.addEventListener("input",(()=>ValidateField(e)))})),document.querySelectorAll('input[name="question"]').forEach((e=>{e.addEventListener("change",(()=>{const e=document.getElementById("questionLabel");ValidateRadioGroup("question",e,"Question type:")}))})),e.addEventListener("submit",(e=>{if(!ValidateFormSubmit())return e.preventDefault(),!1}));const t=document.getElementById("google-map"),a=document.getElementsByClassName("google-map-popup")[0];t.addEventListener("mouseenter",(()=>{a.style.transform="translateX(-50%) translateY(0px)",a.style.opacity="1"})),t.addEventListener("mouseleave",(()=>{a.style.transform="translateX(-50%) translateY(20px)",a.style.opacity="0"}));const n=document.getElementById("add-review-btn"),o=document.getElementById("review-text"),r=document.getElementById("review-rating"),s=document.getElementById("reviews");let i=0;n.addEventListener("click",(()=>{const e=o.value.trim(),t=r.value;if(!e)return;i++;const a={1:5,2:4,3:3,4:2,5:1}[t],n="Rating: "+"★ ".repeat(a)+"☆ ".repeat(5-a),l=document.createElement("div");l.className="d-flex align-items-start mb-2 w-100";const c=new Date,d=c.getDate()+"."+(c.getMonth()+1)+"."+c.getFullYear();l.innerHTML=`\n      <div class="me-3 fw-bold d-flex justify-content-center align-items-center rounded mt-1" style="\n        width: 40px; \n        height: 40px; \n        background-color: #C29C6C; \n        flex-shrink: 0;">\n        ${i}\n      </div>\n      <div style="flex: 1; word-wrap: break-word; overflow-wrap: break-word; max-width: 90%;">\n        <strong>${n}</strong>\n        <p>${e}</p>\n        <p class="mb-3 text-secondary">Post date: ${d}</p>\n      </div>\n    `,s.appendChild(l),o.value="",r.value="1"}))};